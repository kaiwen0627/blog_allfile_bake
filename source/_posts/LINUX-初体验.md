---
title: LINUX 初体验
date: 2018-08-07 00:00:38
tags: [linux, 后台 , 服务器]
categories: linux&&shell
---


> 工作原因，需要学习并使用linux以及shell后台相关操作。借此，总结一下遇到的常见操作。一来是方便自己查询，而来也是对自己学习做个总结。

## 1.基础知识

![PDLrVI.jpg](https://s1.ax1x.com/2018/08/05/PDLrVI.jpg)


+ 1.1 在 Linux 或 Unix 操作系统中，所有的文件和目录都被组织成以一个根节点开始的倒置的树状结构。

+ 1.2 文件系统的最顶层是由根目录开始的，系统使用 / 来表示根目录。在根目录之下的既可以是目录，也可以是文件，而每一个目录中又可以包含子目录文件。如此反复就可以构成一个庞大的文件系统。

+ 1.3 在Linux文件系统中有两个特殊的目录，一个用户所在的工作目录，也叫当前目录，可以使用一个点 . 来表示；另一个是当前目录的上一级目录，也叫父目录，可以使用两个点 .. 来表示。
+ . ：代表当前的目录，也可以使用 ./ 来表示；
+ .. ：代表上一层目录，也可以 ../ 来代表。
+ 如果一个目录或文件名以一个点 . 开始，表示这个目录或文件是一个隐藏目录或文件(如：.bashrc)。即以默认方式查找时，不显示该目录或文件。



## 2.文件相关操作

### 2.1 删除文件
``` bash 
rm file.txt      # 删除文件，后面可以跟多个文件，以空格隔开
rm -rf 文件夹    # 递归删除整个目录，并且不询问用户[强制删除]
```
### 2.2 新建文件
``` bash 
vi test.txt     #若果当前目录木有test.txt文件，则会自动新建
touch test.txt   # 新建test.txt文件
``` 
### 2.3 更改文件属组
``` bash
chown users:jessie file1.txt  #修改文件file1.txt 为jessie组的users用户所有
```
### 2.3 更改文件属性[读\写\执行]
Linux/Unix 的文件调用权限分为三级 : 文件拥有者、群组、其他。利用 chmod 可以藉以控制文件如何被他人所调用。
``` bash
chmod [-cfvR] [--help] [--version] mode file...
权限设定参数：[ugoa...][[+-=][rwxX]...][,...]

u 表示该文件的拥有者，g 表示与该文件的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是。
+ 表示增加权限、- 表示取消权限、= 表示唯一设定权限。
r 表示可读取，w 表示可写入，x 表示可执行，X 表示只有当该文件是个子目录或者该文件已经被设定过为可执行。

chmod a+r file1.txt   # 将文件 file1.txt 设为所有人皆可读取 
chmod u+x ex1.py      # 将 ex1.py 设定为只有该文件拥有者可以执行
chmod -R a+r *        # 将目前目录下的所有文件与子目录皆设为任何人可读取，[其中R代表递归操作]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~`
chmod 777 file

其中a,b,c各为一个数字，分别表示User、Group、及Other的权限。

r=4，w=2，x=1
若要rwx属性则4+2+1=7；
若要rw-属性则4+2=6；
若要r-x属性则4+1=5。
```
### 2.4 解压、压缩文件
```
zip 目录   # 将传入目录里的文件压缩为zip文件,并放置在上一级目录
unzip file.zip  # 将file.zip解压并放在当前目录
unzip file.zip -d cn  #将file.zip解压并存放在cn目录，没有此目录会自动新建
```

### 2.5 服务器间拷贝文件
>Linux scp命令用于Linux之间复制文件和目录。

>scp是 secure copy的缩写, scp是linux系统下基于ssh登陆进行安全的远程文件拷贝命令。

>此命令根据执行机是不是目标机器，可对应实现“推文件”和“拉取文件”操作。

**语法**
```
scp [可选参数] file_source file_target 
```
**重要参数**
```
-p：保留原文件的修改时间，访问时间和访问权限。
-q： 不显示传输进度条。
-r： 递归复制整个目录。
```
**实例：**
```
scp /home/space/music/1.mp3 www.xxx.com:/home/root/others/music/001.mp3 

```
**命令格式**
```
scp -r local_folder remote_username@remote_ip:remote_folder 
或者 
scp -r local_folder remote_ip:remote_folder 
```
**实例：**
```
scp -r /home/space/music/ root@www.xxx.com:/home/root/others/ 
```


## 3.其他

### 3.1 定时任务
Linux crontab是用来定期执行程序的命令。

当安装完成操作系统之后，默认便会启动此任务调度命令。

crond命令每分锺会定期检查是否有要执行的工作，如果有要执行的工作便会自动执行该工作。

而linux任务调度的工作主要分为以下两类：

1. 系统执行的工作：系统周期性所要执行的工作，如备份系统数据、清理缓存
2. 个人执行的工作：某个用户定期要做的工作，例如每隔10分钟检查邮件服务器是否有新信，这些工作可由每个用户自行设置

> 语法
``` bash
crontab [ -u user ] { -l | -r | -e }
```

说明：

crontab 是用来让使用者在固定时间或固定间隔执行程序之用，换句话说，也就是类似使用者的时程表。

-u user 是指设定指定 user 的时程表，这个前提是你必须要有其权限(比如说是 root)才能够指定他人的时程表。如果不使用 -u user 的话，就是表示设定自己的时程表。

参数说明：

-e : 执行文字编辑器来设定时程表，内定的文字编辑器是 VI，如果你想用别的文字编辑器，则请先设定 VISUAL 环境变数来指定使用那个文字编辑器(比如说 setenv VISUAL joe)

-r : 删除目前的时程表

-l : 列出目前的时程表

时程表的格式如下：
``` bash 
f1 f2 f3 f4 f5 program
```
+ 其中 f1 是表示分钟，f2 表示小时，f3 表示一个月份中的第几日，f4 表示月份，f5 表示一个星期中的第几天。program 表示要执行的程序。
+ 当 f1 为 * 时表示每分钟都要执行 program，f2 为 * 时表示每小时都要执行程序，其馀类推
+ 当 f1 为 a-b 时表示从第 a 分钟到第 b 分钟这段时间内要执行，f2 为 a-b 时表示从第 a 到第 b 小时都要执行，其馀类推
+ 当 f1 为 */n 时表示每 n 分钟个时间间隔执行一次，f2 为 */n 表示每 n 小时个时间间隔执行一次，其馀类推
+ 当 f1 为 a, b, c,... 时表示第 a, b, c,... 分钟要执行，f2 为 a, b, c,... 时表示第 a, b, c...个小时要执行，其馀类推

使用者也可以将所有的设定先存放在文件中，用 crontab file 的方式来设定时程表。
```bash
0 */2 * * * /sbin/service httpd restart  #意思是每两个小时重启一次apache 

50 7 * * * /sbin/service sshd start  #意思是每天7：50开启ssh服务 

50 22 * * * /sbin/service sshd stop  #意思是每天22：50关闭ssh服务 

0 0 1,15 * * fsck /home  #每月1号和15号检查/home 磁盘 

1 * * * * /home/bruce/backup  #每小时的第一分执行 /home/bruce/backup这个文件 

00 03 * * 1-5 find /home "*.xxx" -mtime +4 -exec rm {} \;  #每周一至周五3点钟，在目录/home中，查找文件名为*.xxx的文件，并删除4天前的文件。

30 6 */10 * * ls  #意思是每月的1、11、21、31日是的6：30执行一次ls命令
```



【未完待续】